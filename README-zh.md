📘 [English](README.md) | 📙 [简体中文](README-zh.md)

# 🍾 Bottle-Monitor

一个轻量、可扩展的前端监控 SDK，支持 **埋点采集、性能监控、异常捕获**，并内置多队列上报机制，助你快速构建稳定可靠的前端监控体系。

## ✨ 特性

- **插件化设计**：支持热插拔，适配Vue、Vite、原生引入，轻松扩展收集类型  
- **多队列机制**：不同事件类型独立队列，优先级可控  
- **运行时注入**：无需改源码，支持 XPath / `dataset` 动态标记  
- **离线容错**：`service-worker` 缓存 & 自动重试
- **多上报通道**：`sendBeacon` / `XHR` 自适应  
- **统一数据格式化**：减少后端解析压力

---

## 📦 安装

支持 npm 和 CDN 导入，开发中……

## 🏗 架构设计
![架构设计](./docs/architecture.png)

Bottle-Monitor 的前端部分由 初始化 → 收集 → 格式化 → 上报 四大模块组成，后端负责 数据分析与 SourceMap 反解。

### 前端流程
**初始化**：插件化设计，支持 npm / CDN 引入，单例模式确保全局状态唯一

**收集**：
- 数据：点击（XPath / id / dataset）、路由、设备信息
- 性能：web-vitals 指标
- 异常：代码错误、未捕获异常、加载错误、白屏
- 自定义事件

**数据格式化**：统一数据结构，方便后端存储与分析

**上报**：指数退避、自动重试、优先级队列、ServiceWorker 缓存、sendBeacon / XHR

### 后端流程
- PV / UV 统计
- SourceMap 反解错误堆栈
